<div data-ng-if="!me.isAdmin">

  <div data-ng-include="'engagement_index_user_info.html'"></div>

  <hr />
</div>

<div class="dc-engagement-index-controls dc-clearfix-container">
  <form class="form-inline dc-float-left">
    <input type="text" class="dc-engagement-search form-control" placeholder="Search..." data-ng-model="search.$">
  </form>
  <a type="button" href="/download/activities.csv" target="_blank" class="btn btn-info dc-float-right" data-ng-show="me.isAdmin">Download CSV</a>
</div>

<table class="table table-striped table-bordered dc-table-striped-border dc-table-margin">
  <thead class="dc-header-color">
    <tr class="dc-header-title dc-mouse-pointer">
      <th data-ng-click="changeEngagementIndexSort('sortable_name')" data-ng-class="{dropup: reverse}">Student <span class="caret" data-ng-if="sortBy === 'sortable_name'"></span></th>
      <th data-ng-click="changeEngagementIndexSort('share')" data-ng-class="{dropup: reverse}" data-ng-if="me.isAdmin">Share <span class="caret" data-ng-if="sortBy === 'share'"></span></th>
      <th data-ng-click="changeEngagementIndexSort('points')" data-ng-class="{dropup: reverse}">Points <span class="caret" data-ng-if="sortBy === 'points'"></span></th>
      <th data-ng-click="changeEngagementIndexSort('percentile')" data-ng-class="{dropup: reverse}">Percentile <span class="caret" data-ng-if="sortBy === 'percentile'"></span></th>
      <th data-ng-click="changeEngagementIndexSort('last_activity_date')" data-ng-class="{dropup: reverse}">Last Point Earned <span class="caret" data-ng-if="sortBy === 'last_activity_date'"></span></th>
    </tr>
  </thead>
  <tbody>
    <tr data-ng-repeat="student in students | orderBy:sortBy:!reverse | filter:search:strict" data-ng-class="{'info': student.highlight}">
      <td class="col-sm-2" data-ng-bind="student.name"></td>
      <td data-ng-if="me.isAdmin" class="col-sm-2">
        <span data-ng-if="student.share">Yes</span>
        <span data-ng-if="!student.share">No</span>
      </td>
      <td class="col-sm-2" data-ng-bind="student.points"></td>
      <td class="col-sm-2" data-ng-bind-template="{{student.percentile}}%"></td>
      <td class="col-sm-3" data-ng-bind="student.last_activity_date"></td>
    </tr>
  </tbody>
</table>
